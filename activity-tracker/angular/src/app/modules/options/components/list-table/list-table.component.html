<h1 class="text-center">{{title}}</h1>

<div class="container">
  <form class="settings-section" [formGroup]="formGroup" (ngSubmit)="addRules($event)">
    <table class="table table-striped table-bordered">
      <thead>
      <th scope="col">Site</th>
      <th scope="col">Time Start</th>
      <th scope="col">Time End</th>
      <th scope="col">Days</th>
      <th scope="col">Actions</th>
      </thead>
      <tbody>
      <tr class="text-center">
        <td>
          <div class="form-floating">
              <textarea
                [ngClass]="{
                'is-valid': formGroup.controls.site.valid,
                'is-invalid': formGroup.controls.site.invalid && formGroup.controls.site.touched
                }"
                style="height: 120px;"
                class="form-control"
                formControlName="site"
                placeholder="Add new URLs"
                id="floatingTextarea"></textarea>
            <label for="floatingTextarea">Add new URLs</label>
            <div class="invalid-feedback">
              Please provide a valid url.
            </div>
          </div>
        </td>
        <td>
          <input
            class="form-control mt-4"
            [ngClass]="{
            'is-valid': formGroup.controls.timeStart.valid,
            'is-invalid': (formGroup.controls.timeStart.invalid ||
            formGroup.hasError('rangeDateValid')) && formGroup.controls.timeStart.touched
            }"
            type="time"
            formControlName="timeStart"
            min="00:01"
            name="timeStart"
            required>
          <div class="invalid-feedback">
            <p *ngIf="formGroup.controls.timeStart?.errors?.required">Date is required</p>
          </div>
        </td>
        <td>
          <input
            class="form-control mt-4"
            [ngClass]="{
            'is-valid': formGroup.controls.timeEnd.valid,
            'is-invalid': (formGroup.controls.timeEnd.invalid ||
            formGroup.hasError('rangeDateValid')) && formGroup.controls.timeEnd.touched
            }"
            type="time"
            formControlName="timeEnd"
            min="00:01"
            name="timeEnd">
          <div class="invalid-feedback">
            <p *ngIf="formGroup.errors?.rangeDateValid">Start date must be less than the end</p>
            <p *ngIf="formGroup.controls.timeEnd?.errors?.required">Date is required</p>
          </div>
        </td>
        <td>
          <select
            [ngClass]="{
            'is-valid': formGroup.controls.days.valid,
            'is-invalid': formGroup.controls.days.invalid && formGroup.controls.days.touched
            }"
            formControlName="days"
            class="form-select form-control mt-4"
            aria-label="Select day">
            <option [ngValue]="null" disabled>Choose day</option>
            <option
              *ngFor="let day of weekDays" [ngValue]="day">
              {{day}}
            </option>
          </select>
          <div class="invalid-feedback">
            Day a week is required
          </div>
        </td>
        <td>
          <div class="settings-table-actions-style">
            <button
              [disabled]="formGroup.invalid"
              type="submit"
              class="btn btn-success mt-4"
            >Add
            </button>
          </div>
        </td>
      </tr>
      <tr app-settings-row *ngFor="let settingsItem of settingList"
          [settingsItem]="settingsItem"
          (changeItem)="changeItem($event)"
          (duplicateItem)="duplicateItem($event)"
          (removeItem)="removeItem($event)"
          class="text-center align-middle">
      </tr>
      </tbody>
    </table>
  </form>
</div>
